<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>jsレッスン</title>
</head>
<body>
	<button onclick="btSelect('red')">赤</button>
	<button onclick="btSelect('green')">緑</button>
	<button onclick="btSelect('blue')">青</button>
	<button onclick="btWrite()">書く</button>
	<div id="result"></div>
	<div id="penLength"></div>
	<script>
		function Pen(color,length){
			this.color=color;
			this.length=length;
			this.write=function(){
				this.length-=0.5;
				return this.color+"で書きました。残りの長さ"+this.length;
			}
			this.selected=function(){
				return this.color+"を持った。";
			}
		}
		var penRed=new Pen("赤",10);
		var penGreen=new Pen("緑",8);
		var penBlue=new Pen("青",15);
		var pen=null;
		var result=document.getElementById("result");
		var penLength=document.getElementById("penLength");
		penLength.style.color="yellow";
		function btSelect(color){
			switch(color){
				case 'red':
					pen=penRed;
					break;
				case 'green':
					pen=penGreen;
					break;
				case 'blue':
					pen=penBlue;
					break;
			}
			penLength.style.backgroundColor=color;
			penLength.style.width=pen.length+"cm";
			penLength.style.textContent=pen.length+"cm";
			result.textContent=pen.selected();
		}
		function btWrite(){
			if(pen==null){
				result.textContent="ペンを持ってください！";
				return;
			}
			if(pen.length<=0){
				result.textContent="もう書けません...";
				return;
			}
			var msg=pen.write();
			penLength.style.width=pen.length+"cm";
			penLength.textContent=pen.length+"cm";
			result.textContent=msg;
		}
	</script>
</body>
</html>
